<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shooting Game - Improved</title>
<style>
  body, html {
    margin:0; padding:0; height:100%; background:#222; display:flex; justify-content:center; align-items:center; font-family:sans-serif;
  }
  #game-container {
    position: relative; width: 400px; height: 600px; background:#111; border:3px solid #fff; overflow:hidden;
  }
  #player {position:absolute; bottom:10px; width:40px; height:40px; background:blue;}
  .bullet {position:absolute; width:6px; height:12px; background:yellow;}
  .enemy {position:absolute; width:30px; height:30px; background:red;}
  #scoreboard {position:absolute; top:5px; left:5px; color:white; font-size:18px;}
  #levelboard {position:absolute; top:5px; right:5px; color:white; font-size:18px;}
  #livesboard {position:absolute; top:30px; left:5px; color:white; font-size:16px;}
  #start-screen, #game-over-screen {
    position:absolute; inset:0; background:rgba(0,0,0,0.85); color:white; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:10px; z-index:10;
  }
  button {
    padding:10px 20px; font-size:16px; border:none; border-radius:6px; cursor:pointer; background:#4caf50; color:white;
  }
  #instructions {
    color:white; font-size:14px; text-align:center; padding:8px;
  }
</style>
</head>
<body>

<div id="game-container">
  <div id="scoreboard">Score: 0</div>
  <div id="levelboard">Level: 1</div>
  <div id="livesboard">Lives: 3</div>
  <div id="player"></div>

  <div id="instructions">
    Use <b>A</b> to move left, <b>D</b> to move right. <b>Spacebar</b> to shoot.<br>
    Shoot all red enemies before they reach the bottom!
  </div>

  <div id="start-screen">
    <h2>Welcome to Shooting Game!</h2>
    <button id="start-btn">Start Game</button>
  </div>

  <div id="game-over-screen" style="display:none;">
    <h2>Game Over!</h2>
    <p id="final-score"></p>
    <button id="restart-btn">Restart</button>
  </div>
</div>

<script>
const game = document.getElementById('game-container');
const player = document.getElementById('player');
const scoreboard = document.getElementById('scoreboard');
const levelboard = document.getElementById('levelboard');
const livesboard = document.getElementById('livesboard');
const startScreen = document.getElementById('start-screen');
const startBtn = document.getElementById('start-btn');
const gameOverScreen = document.getElementById('game-over-screen');
const finalScore = document.getElementById('final-score');
const restartBtn = document.getElementById('restart-btn');

let score = 0;
let level = 1;
let lives = 3;
let playerPos = 180;
let bullets = [];
let enemies = [];
let running = false;

const PLAYER_SPEED = 25;
let ENEMY_SPEED = 2;
let ENEMY_INTERVAL = 1000;
let enemySpawner;

// Start game
function startGame(){
  score = 0; level = 1; lives = 3;
  playerPos = 180; bullets = []; enemies = [];
  running = true;
  ENEMY_SPEED = 2;
  ENEMY_INTERVAL = 1000;
  scoreboard.textContent = 'Score: 0';
  levelboard.textContent = 'Level: 1';
  livesboard.textContent = 'Lives: 3';
  startScreen.style.display = 'none';
  gameOverScreen.style.display = 'none';
  player.style.left = playerPos + 'px';
  gameLoop();
  enemySpawner = setInterval(spawnEnemy, ENEMY_INTERVAL);
}

function restartGame(){
  bullets.forEach(b => b.remove());
  enemies.forEach(e => e.remove());
  bullets = [];
  enemies = [];
  clearInterval(enemySpawner);
  startGame();
}

// Player movement
document.addEventListener('keydown', (e)=>{
  if(!running) return;
  if(e.key.toLowerCase() === 'a'){ playerPos = Math.max(0, playerPos - PLAYER_SPEED); player.style.left = playerPos + 'px'; }
  if(e.key.toLowerCase() === 'd'){ playerPos = Math.min(360, playerPos + PLAYER_SPEED); player.style.left = playerPos + 'px'; }
  if(e.key === ' ') shootBullet();
});

function shootBullet(){
  const bullet = document.createElement('div');
  bullet.className='bullet';
  bullet.style.left = (playerPos + 17) + 'px';
  bullet.style.bottom = '50px';
  game.appendChild(bullet);
  bullets.push(bullet);
}

function spawnEnemy(){
  if(!running) return;
  const enemy = document.createElement('div');
  enemy.className='enemy';
  enemy.style.left = Math.floor(Math.random()*370) + 'px';
  enemy.style.top = '0px';
  game.appendChild(enemy);
  enemies.push(enemy);
}

// Level up
function updateLevel(){
  const newLevel = Math.floor(score/100) + 1;
  if(newLevel > level){
    level = newLevel;
    ENEMY_SPEED += 0.5; // increase enemy speed
    if(ENEMY_INTERVAL > 400) ENEMY_INTERVAL -= 50; // spawn faster
    clearInterval(enemySpawner);
    enemySpawner = setInterval(spawnEnemy, ENEMY_INTERVAL);
    levelboard.textContent = 'Level: ' + level;
  }
}

function gameLoop(){
  if(!running) return;

  // Move bullets
  bullets.forEach((b,i)=>{
    let bottom = parseInt(b.style.bottom);
    bottom += 10;
    b.style.bottom = bottom + 'px';
    if(bottom > 600){ b.remove(); bullets.splice(i,1); }
  });

  // Move enemies
  enemies.forEach((e,i)=>{
    let top = parseInt(e.style.top);
    top += ENEMY_SPEED;
    e.style.top = top + 'px';

    // Check collision
    bullets.forEach((b,j)=>{
      const bRect = b.getBoundingClientRect();
      const eRect = e.getBoundingClientRect();
      if(!(bRect.right < eRect.left || bRect.left > eRect.right || bRect.bottom < eRect.top || bRect.top > eRect.bottom)){
        score += 10;
        scoreboard.textContent = 'Score: ' + score;
        b.remove(); bullets.splice(j,1);
        e.remove(); enemies.splice(i,1);
      }
    });

    // Enemy reaches bottom
    if(top > 570){
      e.remove(); enemies.splice(i,1);
      lives--;
      livesboard.textContent = 'Lives: ' + lives;
      if(lives <= 0) endGame();
    }
  });

  updateLevel();
  requestAnimationFrame(gameLoop);
}

function endGame(){
  running = false;
  clearInterval(enemySpawner);
  finalScore.textContent = 'Your score: ' + score;
  gameOverScreen.style.display = 'flex';
}

startBtn.addEventListener('click', startGame);
restartBtn.addEventListener('click', restartGame);
</script>

</body>
</html>
