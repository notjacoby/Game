<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Collect the Hearts</title>
<style>
body,html{margin:0;padding:0;height:100%;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#67b9ff,#c6a1ff);font-family:sans-serif;}
.arena{position:relative;width:90vw;height:70vh;background:#f5fbff;border-radius:12px;overflow:hidden;}
.heart{position:absolute;font-size:36px;cursor:grab;user-select:none;transition:transform .1s;}
.drop-zone{position:absolute;right:20px;bottom:20px;width:120px;height:120px;border:3px dashed #8ecbff;border-radius:12px;display:flex;align-items:center;justify-content:center;background:#dff3ff;}
.drop-zone.active{transform:scale(1.05);}
</style>
</head>
<body>
<div class="arena" id="arena">
  <div class="drop-zone" id="dropZone">ðŸ§º</div>
</div>

<script>
const arena = document.getElementById('arena');
const dropZone = document.getElementById('dropZone');
let score = 0;
let running = true;

// Spawn hearts
function spawnHeart() {
  if(!running) return;
  const heart = document.createElement('div');
  heart.className = 'heart';
  heart.textContent = 'â¤';
  const rect = arena.getBoundingClientRect();
  heart.style.left = Math.random()*(rect.width-50) + 'px';
  heart.style.top = Math.random()*(rect.height-50) + 'px';
  arena.appendChild(heart);
  makeDraggable(heart);
  setTimeout(()=>{ if(heart.parentElement) heart.remove(); },5000);
}

// Drag logic
function makeDraggable(el){
  let offsetX=0,offsetY=0,dragging=false;
  el.addEventListener('mousedown', startDrag);
  el.addEventListener('touchstart', e => startDrag(e.touches[0]), {passive:false});

  function startDrag(e){
    dragging=true;
    offsetX = e.clientX - el.offsetLeft;
    offsetY = e.clientY - el.offsetTop;
    document.addEventListener('mousemove', move);
    document.addEventListener('mouseup', endDrag);
    document.addEventListener('touchmove', touchMove, {passive:false});
    document.addEventListener('touchend', endDrag);
  }
  function move(e){
    if(!dragging) return;
    el.style.left = e.clientX - offsetX + 'px';
    el.style.top = e.clientY - offsetY + 'px';
    checkOverlap(el);
  }
  function touchMove(e){
    move(e.touches[0]);
  }
  function endDrag(){
    dragging=false;
    if(isOverDrop(el)){
      el.remove();
      score += 10;
      console.log("Score:", score);
    }
    dropZone.classList.remove('active');
    document.removeEventListener('mousemove', move);
    document.removeEventListener('mouseup', endDrag);
    document.removeEventListener('touchmove', touchMove);
    document.removeEventListener('touchend', endDrag);
  }
}

function isOverDrop(el){
  const a = el.getBoundingClientRect();
  const b = dropZone.getBoundingClientRect();
  const overlapX = Math.max(0, Math.min(a.right,b.right) - Math.max(a.left,b.left));
  const overlapY = Math.max(0, Math.min(a.bottom,b.bottom) - Math.max(a.top,b.top));
  if(overlapX*overlapY > 400){ dropZone.classList.add('active'); return true; }
  return false;
}

// Spawn hearts every second
setInterval(spawnHeart, 1000);
</script>
</body>
</html>
